


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > PostgresAdminDAO</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.abhijith.dal</a>
</div>

<h1>Coverage Summary for Class: PostgresAdminDAO (org.abhijith.dal)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">PostgresAdminDAO</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    11.1%
  </span>
  <span class="absValue">
    (2/18)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    6.5%
  </span>
  <span class="absValue">
    (12/184)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package org.abhijith.dal;
&nbsp;
&nbsp;import org.abhijith.daoInterfaces.AdminDAO;
&nbsp;
&nbsp;import java.sql.PreparedStatement;
&nbsp;import java.sql.ResultSet;
&nbsp;import java.util.ArrayList;
&nbsp;
&nbsp;public class PostgresAdminDAO extends PostgresCommonDAO implements AdminDAO {
&nbsp;    public PostgresAdminDAO( String connectionURL, String username, String password ) {
<b class="fc">&nbsp;        super( connectionURL, username, password );</b>
&nbsp;    }
&nbsp;
&nbsp;    public String[][] getGradesOfCourse( String courseCode, int year, int semester, String departmentID ) {
&nbsp;        try {
<b class="nc">&nbsp;            PreparedStatement getGradesQuery = databaseConnection.prepareStatement( &quot;SELECT entry_number, grade FROM student_course_registration WHERE course_code = ? AND year = ? AND semester = ? ORDER BY entry_number&quot; );</b>
<b class="nc">&nbsp;            getGradesQuery.setString( 1, courseCode );</b>
<b class="nc">&nbsp;            getGradesQuery.setInt( 2, year );</b>
<b class="nc">&nbsp;            getGradesQuery.setInt( 3, semester );</b>
<b class="nc">&nbsp;            ResultSet getGradesQueryResult = getGradesQuery.executeQuery();</b>
&nbsp;
<b class="nc">&nbsp;            ArrayList&lt;String[]&gt; records = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;            while ( getGradesQueryResult.next() ) {</b>
<b class="nc">&nbsp;                String entry_number = getGradesQueryResult.getString( 1 );</b>
<b class="nc">&nbsp;                String grade        = getGradesQueryResult.getString( 2 );</b>
<b class="nc">&nbsp;                records.add( new String[]{ entry_number, grade } );</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            return records.toArray( new String[records.size()][] );</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return new String[][]{};</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public boolean insertStudent( String entryNumber, String name, String departmentID, int batch ) {
&nbsp;        try {
&nbsp;            // You should probably set autocommit to false and execute both of the below statements together.
<b class="nc">&nbsp;            PreparedStatement insertStudentQuery = databaseConnection.prepareStatement( &quot;INSERT INTO student(entry_number, name, department_id, batch) VALUES (?, ?, ?, ?)&quot; );</b>
<b class="nc">&nbsp;            insertStudentQuery.setString( 1, entryNumber );</b>
<b class="nc">&nbsp;            insertStudentQuery.setString( 2, name );</b>
<b class="nc">&nbsp;            insertStudentQuery.setString( 3, departmentID );</b>
<b class="nc">&nbsp;            insertStudentQuery.setInt( 4, batch );</b>
<b class="nc">&nbsp;            int successStatus = insertStudentQuery.executeUpdate();</b>
&nbsp;
<b class="nc">&nbsp;            PreparedStatement insertPasswordQuery = databaseConnection.prepareStatement( &quot;INSERT INTO common_user_details VALUES (?, ?, ?)&quot; );</b>
<b class="nc">&nbsp;            insertPasswordQuery.setString( 1, entryNumber );</b>
&nbsp;            // the default password is set here
<b class="nc">&nbsp;            insertPasswordQuery.setString( 2, &quot;iitropar&quot; );</b>
<b class="nc">&nbsp;            insertPasswordQuery.setString( 3, &quot;student&quot; );</b>
<b class="nc">&nbsp;            successStatus &amp;= insertPasswordQuery.executeUpdate();</b>
&nbsp;
<b class="nc">&nbsp;            return successStatus == 1;</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public boolean insertFaculty( String facultyID, String name, String departmentID ) {
&nbsp;        try {
<b class="nc">&nbsp;            PreparedStatement insertFacultyQuery = databaseConnection.prepareStatement( &quot;INSERT INTO faculty(faculty_id, name, department_id) VALUES (?, ?, ?)&quot; );</b>
<b class="nc">&nbsp;            insertFacultyQuery.setString( 1, facultyID );</b>
<b class="nc">&nbsp;            insertFacultyQuery.setString( 2, name );</b>
<b class="nc">&nbsp;            insertFacultyQuery.setString( 3, departmentID );</b>
<b class="nc">&nbsp;            int successStatus = insertFacultyQuery.executeUpdate();</b>
&nbsp;
<b class="nc">&nbsp;            PreparedStatement insertPasswordQuery = databaseConnection.prepareStatement( &quot;INSERT INTO common_user_details VALUES (?, ?, ?)&quot; );</b>
<b class="nc">&nbsp;            insertPasswordQuery.setString( 1, facultyID );</b>
&nbsp;            // the default password is set here
<b class="nc">&nbsp;            insertPasswordQuery.setString( 2, &quot;iitropar&quot; );</b>
<b class="nc">&nbsp;            insertPasswordQuery.setString( 3, &quot;faculty&quot; );</b>
<b class="nc">&nbsp;            successStatus &amp;= insertPasswordQuery.executeUpdate();</b>
<b class="nc">&nbsp;            return successStatus == 1;</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public boolean insertCourse( String courseCode, String courseTitle, double[] creditStructure, String[] prerequisites ) {
&nbsp;        try {
<b class="nc">&nbsp;            PreparedStatement insertCourseQuery = databaseConnection.prepareStatement( &quot;INSERT INTO course_catalog VALUES(?, ?, ?, ?, ?, ?, ?, ?)&quot; );</b>
<b class="nc">&nbsp;            insertCourseQuery.setString( 1, courseCode );</b>
<b class="nc">&nbsp;            insertCourseQuery.setString( 2, courseTitle );</b>
<b class="nc">&nbsp;            insertCourseQuery.setDouble( 3, creditStructure[0] );</b>
<b class="nc">&nbsp;            insertCourseQuery.setDouble( 4, creditStructure[1] );</b>
<b class="nc">&nbsp;            insertCourseQuery.setDouble( 5, creditStructure[2] );</b>
<b class="nc">&nbsp;            insertCourseQuery.setDouble( 6, creditStructure[3] );</b>
<b class="nc">&nbsp;            insertCourseQuery.setDouble( 7, creditStructure[4] );</b>
<b class="nc">&nbsp;            insertCourseQuery.setObject( 8, prerequisites );</b>
<b class="nc">&nbsp;            int insertCourseQueryResult = insertCourseQuery.executeUpdate();</b>
<b class="nc">&nbsp;            return insertCourseQueryResult == 1;</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean checkAllPrerequisites( String[] prerequisites ) {
&nbsp;        try {
<b class="nc">&nbsp;            boolean coursesFound = true;</b>
<b class="nc">&nbsp;            for ( String course : prerequisites ) {</b>
<b class="nc">&nbsp;                PreparedStatement findCourseQuery = databaseConnection.prepareStatement( &quot;SELECT course_code FROM course_catalog WHERE course_code = ?&quot; );</b>
<b class="nc">&nbsp;                findCourseQuery.setString( 1, course );</b>
<b class="nc">&nbsp;                ResultSet findCourseQueryResult = findCourseQuery.executeQuery();</b>
<b class="nc">&nbsp;                coursesFound &amp;= findCourseQueryResult.next();</b>
&nbsp;            }
<b class="nc">&nbsp;            return coursesFound;</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean dropCourseFromCatalog( String courseCode ) {
&nbsp;        try {
<b class="nc">&nbsp;            PreparedStatement dropCourseQuery = databaseConnection.prepareStatement( &quot;DELETE FROM course_catalog WHERE course_code = ?&quot; );</b>
<b class="nc">&nbsp;            dropCourseQuery.setString( 1, courseCode );</b>
<b class="nc">&nbsp;            int dropCourseQueryResult = dropCourseQuery.executeUpdate();</b>
<b class="nc">&nbsp;            return dropCourseQueryResult == 1;</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean createBatch( int batchYear ) {
&nbsp;        try {
<b class="nc">&nbsp;            PreparedStatement createBatchQuery = databaseConnection.prepareStatement( &quot;INSERT INTO batch VALUES(?)&quot; );</b>
<b class="nc">&nbsp;            createBatchQuery.setInt( 1, batchYear );</b>
<b class="nc">&nbsp;            int createBatchQueryResult = createBatchQuery.executeUpdate();</b>
<b class="nc">&nbsp;            return createBatchQueryResult == 1;</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Something went wrong&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean createCurriculum( int batchYear, double[] creditRequirements ) {
&nbsp;        try {
<b class="nc">&nbsp;            PreparedStatement createCurriculumQuery = databaseConnection.prepareStatement( &quot;INSERT INTO ug_curriculum VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)&quot; );</b>
<b class="nc">&nbsp;            createCurriculumQuery.setInt( 1, batchYear );</b>
<b class="nc">&nbsp;            for ( int i = 2; i &lt;= 12; i++ ) {</b>
<b class="nc">&nbsp;                createCurriculumQuery.setDouble( i, creditRequirements[i - 2] );</b>
&nbsp;            }
<b class="nc">&nbsp;            int createCurriculumQueryResult = createCurriculumQuery.executeUpdate();</b>
<b class="nc">&nbsp;            return createCurriculumQueryResult == 1;</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Something went wrong&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean insertCoreCourse( String courseCode, String[] departmentCodes, int batch, String courseCategory ) {
&nbsp;        try {
<b class="nc">&nbsp;            int               insertCourseQueryResult = 1;</b>
<b class="nc">&nbsp;            PreparedStatement insertCourseQuery       = databaseConnection.prepareStatement( &quot;INSERT INTO core_courses VALUES (?, ?, ?, ?)&quot; );</b>
<b class="nc">&nbsp;            insertCourseQuery.setString( 1, courseCode );</b>
<b class="nc">&nbsp;            insertCourseQuery.setInt( 3, batch );</b>
<b class="nc">&nbsp;            insertCourseQuery.setString( 4, courseCategory );</b>
<b class="nc">&nbsp;            for ( String department : departmentCodes ) {</b>
<b class="nc">&nbsp;                insertCourseQuery.setString( 2, department );</b>
<b class="nc">&nbsp;                insertCourseQueryResult &amp;= insertCourseQuery.executeUpdate();</b>
&nbsp;            }
<b class="nc">&nbsp;            return insertCourseQueryResult == 1;</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please check that all courses exist in the course catalog&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean resetCoreCoursesList( int batch ) {
&nbsp;        try {
&nbsp;            // Delete all the core courses of the particular batch from the core_courses table
<b class="nc">&nbsp;            PreparedStatement resetCoreCoursesQuery = databaseConnection.prepareStatement( &quot;DELETE FROM core_courses WHERE batch = ?&quot; );</b>
<b class="nc">&nbsp;            resetCoreCoursesQuery.setInt( 1, batch );</b>
<b class="nc">&nbsp;            resetCoreCoursesQuery.executeUpdate();</b>
&nbsp;
&nbsp;            // If the query executes successfully return true i.e., the table is ready to be inserted into again
<b class="nc">&nbsp;            return true;</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
&nbsp;            // If the table is not found, or the database connection has failed
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
&nbsp;            // Return the fact that the database operation was not executed
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean findEntryNumber( String entryNumber ) {
&nbsp;        try {
&nbsp;            // Generate the SQL query that will check if the student exists
<b class="nc">&nbsp;            PreparedStatement findEntryNumberQuery = databaseConnection.prepareStatement(&quot;SELECT name FROM student WHERE entry_number = ?&quot;);</b>
<b class="nc">&nbsp;            findEntryNumberQuery.setString( 1, entryNumber );</b>
<b class="nc">&nbsp;            ResultSet findEntryNumberQueryResult = findEntryNumberQuery.executeQuery();</b>
&nbsp;
&nbsp;            // True if the query has found anything, false otherwise
<b class="nc">&nbsp;            return findEntryNumberQueryResult.next();</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public String[] getCoreCourses( int batch, String studentDepartment ) {
&nbsp;        try {
&nbsp;            // Execute the SQL statement that will get all the core courses of a particular department in a particular year
<b class="nc">&nbsp;            PreparedStatement getCoreCoursesQuery = databaseConnection.prepareStatement(&quot;SELECT course_code FROM core_courses WHERE batch = ? AND department_id = ?&quot;);</b>
<b class="nc">&nbsp;            getCoreCoursesQuery.setInt( 1, batch );</b>
<b class="nc">&nbsp;            getCoreCoursesQuery.setString( 2, studentDepartment );</b>
<b class="nc">&nbsp;            ResultSet getCoreCoursesQueryResult = getCoreCoursesQuery.executeQuery();</b>
&nbsp;
&nbsp;            // Now we have to fetch all the course codes into an arraylist that will be converted into a string array
<b class="nc">&nbsp;            ArrayList&lt;String&gt; coreCourses = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;            while ( getCoreCoursesQueryResult.next() ) {</b>
<b class="nc">&nbsp;                String courseCode = getCoreCoursesQueryResult.getString( 1 );</b>
<b class="nc">&nbsp;                coreCourses.add( courseCode );</b>
<b class="nc">&nbsp;            }</b>
&nbsp;            // Return the array list converted to a string array
<b class="nc">&nbsp;            return coreCourses.toArray(new String[coreCourses.size()]);</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public String[] getListOfStudentsInBatch( int batch, String department ) {
&nbsp;        try {
&nbsp;            // Execute the SQL query to fetch all the students of this department from this batch
<b class="nc">&nbsp;            PreparedStatement getStudentsQuery = databaseConnection.prepareStatement(&quot;SELECT entry_number FROM student WHERE batch = ? AND department_id = ?&quot;);</b>
<b class="nc">&nbsp;            getStudentsQuery.setInt( 1, batch );</b>
<b class="nc">&nbsp;            getStudentsQuery.setString( 2, department );</b>
<b class="nc">&nbsp;            ResultSet getStudentsQueryResult = getStudentsQuery.executeQuery();</b>
&nbsp;
&nbsp;            // Now get the list of students returned by the query into a string array
<b class="nc">&nbsp;            ArrayList&lt;String&gt; studentsList = new ArrayList&lt;&gt;();</b>
&nbsp;
&nbsp;            // Get all the entry numbers from the result set
<b class="nc">&nbsp;            while ( getStudentsQueryResult.next() ) {</b>
<b class="nc">&nbsp;                String entryNumber = getStudentsQueryResult.getString( 1 );</b>
<b class="nc">&nbsp;                studentsList.add( entryNumber );</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;            // Return the array list converted into a string array
<b class="nc">&nbsp;            return studentsList.toArray( new String[studentsList.size()] );</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return new String[]{};</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean checkIfSessionCompleted( int year, int semester ) {
&nbsp;        try  {
&nbsp;            // Get the status of the session that was provided
<b class="nc">&nbsp;            PreparedStatement getSessionQuery = databaseConnection.prepareStatement( &quot;SELECT current_event FROM current_year_and_semester WHERE year = ? AND semester = ?&quot; );</b>
<b class="nc">&nbsp;            getSessionQuery.setInt( 1, year );</b>
<b class="nc">&nbsp;            getSessionQuery.setInt( 2, semester );</b>
<b class="nc">&nbsp;            ResultSet getSessionQueryResult = getSessionQuery.executeQuery();</b>
&nbsp;
&nbsp;            // Check if the given session contains an entry in the database
<b class="nc">&nbsp;            boolean isSessionValid = getSessionQueryResult.next();</b>
<b class="nc">&nbsp;            if ( !isSessionValid ) return false;</b>
&nbsp;
&nbsp;            // If the session exists, we need to check if the session is completed
<b class="nc">&nbsp;            String courseStatus = getSessionQueryResult.getString( 1 );</b>
<b class="nc">&nbsp;            return courseStatus.equals( &quot;COMPLETED&quot; );</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean createNewSession( int newYear, int newSemester ) {
&nbsp;        try {
&nbsp;            // Create an SQL query to insert the session into the database
<b class="nc">&nbsp;            PreparedStatement createSessionQuery = databaseConnection.prepareStatement( &quot;INSERT INTO current_year_and_semester( year, semester ) VALUES(?, ?)&quot; );</b>
<b class="nc">&nbsp;            createSessionQuery.setInt( 1, newYear );</b>
<b class="nc">&nbsp;            createSessionQuery.setInt( 2, newSemester );</b>
&nbsp;
&nbsp;            // Return true only if a new session was created in the database, false otherwise
<b class="nc">&nbsp;            return createSessionQuery.executeUpdate() == 1;</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean setSessionEvent( String event, int currentYear, int currentSemester ) {
&nbsp;        try {
&nbsp;            // These are the only statuses that are allowed. If the user has entered a completely different status, it must be rejected
<b class="fc">&nbsp;            String[] availableEvents = new String[]{ &quot;RUNNING&quot;, &quot;ENROLLING&quot;, &quot;OFFERING&quot;, &quot;GRADE SUBMISSION&quot;, &quot;COMPLETED&quot; };</b>
&nbsp;
&nbsp;            // Go through all the valid events and check if this particular event is found in the list
<b class="fc">&nbsp;            boolean stringFound = false;</b>
<b class="fc">&nbsp;            for ( String temp : availableEvents ) {</b>
<b class="fc">&nbsp;                stringFound |= temp.equals( event );</b>
&nbsp;            }
<b class="fc">&nbsp;            if ( !stringFound ) return false;</b>
&nbsp;
&nbsp;            // SQL query to update the event in the database
<b class="fc">&nbsp;            PreparedStatement setStatusQuery = databaseConnection.prepareStatement(&quot;UPDATE current_year_and_semester SET current_event = ? WHERE year = ? AND semester = ?&quot;);</b>
<b class="fc">&nbsp;            setStatusQuery.setString( 1, event );</b>
<b class="fc">&nbsp;            setStatusQuery.setInt( 2, currentYear );</b>
<b class="fc">&nbsp;            setStatusQuery.setInt( 3, currentSemester );</b>
<b class="fc">&nbsp;            setStatusQuery.executeUpdate();</b>
&nbsp;
&nbsp;            // If the query was executed successfully the update was successful. The year and semester have been provided by us
<b class="fc">&nbsp;            return true;</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database Error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean verifyNoMissingGrades( int currentYear, int currentSemester ) {
&nbsp;        try {
&nbsp;            // SQL query to check if there are any students in the previous semester who have not had their grades entered
&nbsp;            // &#39;-&#39; is used in the database to indicate that an entry has not yet been inserted
<b class="nc">&nbsp;            PreparedStatement missingGradeQuery = databaseConnection.prepareStatement(&quot;SELECT * FROM student_course_registration WHERE year = ? AND semester = ? AND grade = &#39;-&#39;&quot;);</b>
<b class="nc">&nbsp;            missingGradeQuery.setInt( 1, currentYear );</b>
<b class="nc">&nbsp;            missingGradeQuery.setInt( 2, currentSemester );</b>
<b class="nc">&nbsp;            ResultSet missingGradeQueryResult = missingGradeQuery.executeQuery();</b>
&nbsp;
&nbsp;            // If any row was returned there is a missing grade in the session
<b class="nc">&nbsp;            return !missingGradeQueryResult.next();</b>
<b class="nc">&nbsp;        } catch ( Exception error ) {</b>
<b class="nc">&nbsp;            System.out.println( &quot;Database error. Please try again later&quot; );</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-02-21 01:26</div>
</div>
</body>
</html>
