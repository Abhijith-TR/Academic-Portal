<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PostgresStudentDAO.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Tests in 'client' Coverage Results</a> &gt; <a href="index.source.html" class="el_package">org.abhijith.dal</a> &gt; <span class="el_source">PostgresStudentDAO.java</span></div><h1>PostgresStudentDAO.java</h1><pre class="source lang-java linenums">package org.abhijith.dal;

import org.abhijith.daoInterfaces.StudentDAO;
import org.abhijith.utils.Utils;

import java.sql.Array;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;

public class PostgresStudentDAO extends PostgresCommonDAO implements StudentDAO {
    public PostgresStudentDAO() {
<span class="fc" id="L13">        super();</span>
<span class="fc" id="L14">    }</span>

    @Override
    public boolean checkCourseOffering( String courseCode, int currentYear, int currentSemester, String courseDepartment ) {
        try {
<span class="fc bfc" id="L19" title="All 8 branches covered.">            if ( currentYear &lt;= 0 || currentSemester &lt;= 0 || courseCode == null || courseDepartment == null )</span>
<span class="fc" id="L20">                return false;</span>
<span class="fc" id="L21">            courseCode = courseCode.toUpperCase();</span>
<span class="fc" id="L22">            courseDepartment = courseDepartment.toUpperCase();</span>

            // SQL query to find the course in the course offerings database
<span class="fc" id="L25">            PreparedStatement checkQuery = databaseConnection.prepareStatement( &quot;SELECT course_code FROM course_offerings WHERE course_code = ? AND year = ? AND semester = ? AND department_id = ?&quot; );</span>
<span class="fc" id="L26">            checkQuery.setString( 1, courseCode );</span>
<span class="fc" id="L27">            checkQuery.setInt( 2, currentYear );</span>
<span class="fc" id="L28">            checkQuery.setInt( 3, currentSemester );</span>
<span class="fc" id="L29">            checkQuery.setString( 4, courseDepartment );</span>
<span class="fc" id="L30">            ResultSet doesCourseExist = checkQuery.executeQuery();</span>

            // Returns true if it manages to find such an entry
<span class="fc" id="L33">            return doesCourseExist.next();</span>
<span class="fc" id="L34">        } catch ( Exception error ) {</span>
<span class="fc" id="L35">            System.out.println( &quot;Database Error. Please try again later&quot; );</span>
<span class="fc" id="L36">            return false;</span>
        }
    }

    @Override
    public boolean checkStudentPassStatus( String courseCode, int gradeCutoff, String entryNumber ) {
        try {
<span class="fc bfc" id="L43" title="All 8 branches covered.">            if ( courseCode == null || gradeCutoff &lt; 0 || gradeCutoff &gt; 10 || entryNumber == null ) return false;</span>
<span class="fc" id="L44">            courseCode = courseCode.toUpperCase();</span>
<span class="fc" id="L45">            entryNumber = entryNumber.toUpperCase();</span>

            // SQL query to fetch the grade of the corresponding student of the corresponding course code
<span class="fc" id="L48">            PreparedStatement gradeQuery = databaseConnection.prepareStatement( &quot;SELECT grade FROM student_course_registration WHERE entry_number = ? AND course_code = ? ORDER BY grade&quot; );</span>
<span class="fc" id="L49">            gradeQuery.setString( 1, entryNumber );</span>
<span class="fc" id="L50">            gradeQuery.setString( 2, courseCode );</span>
<span class="fc" id="L51">            ResultSet courseQueryResult = gradeQuery.executeQuery();</span>

            // The student may have enrolled in the course many times, return the highest possible grade
<span class="fc bfc" id="L54" title="All 2 branches covered.">            while ( courseQueryResult.next() ) {</span>
<span class="fc" id="L55">                String grade = courseQueryResult.getString( 1 );</span>
<span class="fc bfc" id="L56" title="All 2 branches covered.">                if ( Utils.getGradeValue( grade ) &gt;= gradeCutoff ) return true;</span>
<span class="fc" id="L57">            }</span>
            // If no records are found, return false
<span class="fc" id="L59">            return false;</span>
<span class="fc" id="L60">        } catch ( Exception error ) {</span>
<span class="fc" id="L61">            System.out.println( &quot;Database Error. Please try again later&quot; );</span>
<span class="fc" id="L62">            return false;</span>
        }
    }

    @Override
    public String[] getCourseCatalogPrerequisites( String courseCode ) {
        try {
<span class="fc bfc" id="L69" title="All 2 branches covered.">            if ( courseCode == null ) return null;</span>
<span class="fc" id="L70">            courseCode = courseCode.toUpperCase();</span>

            // SQL query to fetch all the prerequisites from the course catalog for this particular course code
<span class="fc" id="L73">            PreparedStatement prerequisiteQuery = databaseConnection.prepareStatement( &quot;SELECT pre_requisites FROM course_catalog WHERE course_code = ?&quot; );</span>
<span class="fc" id="L74">            prerequisiteQuery.setString( 1, courseCode );</span>
<span class="fc" id="L75">            ResultSet courseCatalogResult = prerequisiteQuery.executeQuery();</span>
<span class="fc" id="L76">            boolean   subjectExists       = courseCatalogResult.next();</span>
            // If the subject does not exist, return null
<span class="fc bfc" id="L78" title="All 2 branches covered.">            if ( !subjectExists ) {</span>
<span class="fc" id="L79">                return null;</span>
            }
<span class="fc" id="L81">            Array prerequisites = courseCatalogResult.getArray( 1 );</span>
            // If the course code exists but no prerequisites exist, return an empty string to denote there are no prerequisites
<span class="fc bfc" id="L83" title="All 2 branches covered.">            if ( prerequisites == null ) return new String[]{};</span>
<span class="fc" id="L84">            return (String[]) prerequisites.getArray();</span>
<span class="fc" id="L85">        } catch ( Exception error ) {</span>
<span class="fc" id="L86">            System.out.println( &quot;Database Error. Please try again later&quot; );</span>
<span class="fc" id="L87">            return null;</span>
        }
    }

    @Override
    public String[][] getInstructorPrerequisites( String courseCode, int year, int semester, String courseDepartment ) {
        try {
<span class="fc bfc" id="L94" title="All 8 branches covered.">            if ( courseCode == null || year &lt; 0 || semester &lt; 0 || courseDepartment == null ) return null;</span>
<span class="fc" id="L95">            courseCode = courseCode.toUpperCase();</span>
<span class="fc" id="L96">            courseDepartment = courseDepartment.toUpperCase();</span>

            // SQL query to get the prerequisites of a particular offering from the database
<span class="fc" id="L99">            PreparedStatement prerequisiteQuery = databaseConnection.prepareStatement( &quot;SELECT prereq, grade_criteria, type FROM instructor_prerequisites WHERE course_code = ? AND semester = ? AND year = ? AND department_id = ? ORDER BY type , course_code&quot; );</span>
<span class="fc" id="L100">            prerequisiteQuery.setString( 1, courseCode );</span>
<span class="fc" id="L101">            prerequisiteQuery.setInt( 2, semester );</span>
<span class="fc" id="L102">            prerequisiteQuery.setInt( 3, year );</span>
<span class="fc" id="L103">            prerequisiteQuery.setString( 4, courseDepartment );</span>
<span class="fc" id="L104">            ResultSet prerequisiteResult = prerequisiteQuery.executeQuery();</span>

            // Convert the result set into the required format
<span class="fc" id="L107">            ArrayList&lt;ArrayList&lt;String&gt;&gt; prerequisites = new ArrayList&lt;&gt;();</span>
<span class="fc bfc" id="L108" title="All 2 branches covered.">            while ( prerequisiteResult.next() ) {</span>
                // The array contains { Prerequisite Course Code, Grade Criteria }
<span class="fc" id="L110">                String course        = prerequisiteResult.getString( 1 );</span>
<span class="fc" id="L111">                String gradeCriteria = prerequisiteResult.getString( 2 );</span>
<span class="fc" id="L112">                int    type          = prerequisiteResult.getInt( 3 );</span>
                // If the type has not been encountered so far, add a new entry into the array list
<span class="fc bfc" id="L114" title="All 2 branches covered.">                if ( type &gt; prerequisites.size() ) {</span>
<span class="fc" id="L115">                    prerequisites.add( new ArrayList&lt;&gt;() );</span>
                }
<span class="fc" id="L117">                prerequisites.get( type - 1 ).add( course );</span>
<span class="fc" id="L118">                prerequisites.get( type - 1 ).add( gradeCriteria );</span>
<span class="fc" id="L119">            }</span>
            // Converting the array list to the proper 2D array format
<span class="fc" id="L121">            ArrayList&lt;String[]&gt; arrayToReturn = new ArrayList&lt;&gt;();</span>
<span class="fc bfc" id="L122" title="All 2 branches covered.">            for ( ArrayList&lt;String&gt; temp : prerequisites ) arrayToReturn.add( temp.toArray( new String[temp.size()] ) );</span>
<span class="fc" id="L123">            return arrayToReturn.toArray( new String[arrayToReturn.size()][] );</span>
<span class="fc" id="L124">        } catch ( Exception error ) {</span>
<span class="fc" id="L125">            System.out.println( &quot;Database Error. Please try again later&quot; );</span>
<span class="fc" id="L126">            return null;</span>
        }
    }

    @Override
    public double getCreditsOfCourse( String courseCode ) {
        try {
<span class="fc bfc" id="L133" title="All 2 branches covered.">            if ( courseCode == null ) return 25;</span>
<span class="fc" id="L134">            courseCode = courseCode.toUpperCase();</span>

            // SQL query to fetch the credits for the corresponding course from the database
<span class="fc" id="L137">            PreparedStatement creditQuery = databaseConnection.prepareStatement( &quot;SELECT credits FROM course_catalog WHERE course_code = ?&quot; );</span>
<span class="fc" id="L138">            creditQuery.setString( 1, courseCode );</span>
<span class="fc" id="L139">            ResultSet creditQueryResult  = creditQuery.executeQuery();</span>
<span class="fc" id="L140">            boolean   querySuccessStatus = creditQueryResult.next();</span>
            // If the course code cannot exist, return 25 to denote the fact that nobody can enroll in it
<span class="fc bfc" id="L142" title="All 2 branches covered.">            if ( !querySuccessStatus ) return 25;</span>
<span class="fc" id="L143">            return creditQueryResult.getInt( 1 );</span>
<span class="fc" id="L144">        } catch ( Exception error ) {</span>
<span class="fc" id="L145">            System.out.println( &quot;Database Error. Please try again later&quot; );</span>
<span class="fc" id="L146">            return 25;</span>
        }
    }

    @Override
    public double getCreditsInSession( String entryNumber, int currentYear, int currentSemester ) {
        try {
<span class="fc bfc" id="L153" title="All 6 branches covered.">            if ( entryNumber == null || currentSemester &lt; 0 || currentYear &lt; 0 ) return 25;</span>
<span class="fc" id="L154">            entryNumber = entryNumber.toUpperCase();</span>

            // SQL query to fetch the total number of credits that the student has enrolled in the current semester
<span class="fc" id="L157">            PreparedStatement creditQuery = databaseConnection.prepareStatement( &quot;SELECT SUM(credits) FROM course_catalog WHERE course_code IN (SELECT course_code FROM student_course_registration WHERE entry_number = ? AND year = ? AND semester = ?)&quot; );</span>
<span class="fc" id="L158">            creditQuery.setString( 1, entryNumber );</span>
<span class="fc" id="L159">            creditQuery.setInt( 2, currentYear );</span>
<span class="fc" id="L160">            creditQuery.setInt( 3, currentSemester );</span>
<span class="fc" id="L161">            ResultSet creditQueryResult = creditQuery.executeQuery();</span>

            // If no results are found, return 0 to indicate that the student has not enrolled in any course so far
<span class="fc" id="L164">            boolean coursesFound = creditQueryResult.next();</span>
<span class="pc bpc" id="L165" title="1 of 2 branches missed.">            return ( coursesFound ) ? creditQueryResult.getInt( 1 ) : 0;</span>
<span class="fc" id="L166">        } catch ( Exception error ) {</span>
<span class="fc" id="L167">            System.out.println( &quot;Database Error. Please try again later&quot; );</span>
<span class="fc" id="L168">            return 25;</span>
        }
    }

    @Override
    public boolean enroll( String courseCode, String entryNumber, int currentYear, int currentSemester, String offeringDepartment, String courseCategory ) {
        try {
<span class="fc bfc" id="L175" title="All 12 branches covered.">            if ( courseCode == null || entryNumber == null || currentSemester &lt;= 0 || currentYear &lt;= 0 || offeringDepartment == null || courseCategory == null )</span>
<span class="fc" id="L176">                return false;</span>
<span class="fc" id="L177">            courseCode = courseCode.toUpperCase();</span>
<span class="fc" id="L178">            entryNumber = entryNumber.toUpperCase();</span>
<span class="fc" id="L179">            offeringDepartment = offeringDepartment.toUpperCase();</span>
<span class="fc" id="L180">            courseCategory = courseCategory.toUpperCase();</span>

            // SQL query to insert the enrollment into the student_course_registration_table in the database
<span class="fc" id="L183">            PreparedStatement enrollmentQuery = databaseConnection.prepareStatement( &quot;INSERT INTO student_course_registration(entry_number, course_code, year, semester, department_id, category) VALUES (?, ?, ?, ?, ?, ?)&quot; );</span>
<span class="fc" id="L184">            enrollmentQuery.setString( 1, entryNumber );</span>
<span class="fc" id="L185">            enrollmentQuery.setString( 2, courseCode );</span>
<span class="fc" id="L186">            enrollmentQuery.setInt( 3, currentYear );</span>
<span class="fc" id="L187">            enrollmentQuery.setInt( 4, currentSemester );</span>
<span class="fc" id="L188">            enrollmentQuery.setString( 5, offeringDepartment );</span>
<span class="fc" id="L189">            enrollmentQuery.setString( 6, courseCategory );</span>
<span class="fc" id="L190">            int enrollmentResult = enrollmentQuery.executeUpdate();</span>
            // Returns true only if the insertion was successful in the database
<span class="pc bpc" id="L192" title="1 of 2 branches missed.">            return enrollmentResult == 1;</span>
<span class="fc" id="L193">        } catch ( Exception error ) {</span>
<span class="fc" id="L194">            System.out.println( &quot;Enrollment Request Failed&quot; );</span>
<span class="fc" id="L195">            return false;</span>
        }
    }

    @Override
    public boolean dropCourse( String courseCode, String entryNumber, int currentYear, int currentSemester ) {
        try {
<span class="fc bfc" id="L202" title="All 8 branches covered.">            if ( courseCode == null || entryNumber == null || currentYear &lt;= 0 || currentSemester &lt;= 0 ) return false;</span>
<span class="fc" id="L203">            courseCode = courseCode.toUpperCase();</span>
<span class="fc" id="L204">            entryNumber = entryNumber.toUpperCase();</span>

            // SQL query to delete the corresponding entry of the corresponding student from the database
<span class="fc" id="L207">            PreparedStatement dropQuery = databaseConnection.prepareStatement( &quot;DELETE FROM student_course_registration WHERE course_code = ? AND entry_number = ? AND year = ? AND semester = ?&quot; );</span>
<span class="fc" id="L208">            dropQuery.setString( 1, courseCode );</span>
<span class="fc" id="L209">            dropQuery.setString( 2, entryNumber );</span>
<span class="fc" id="L210">            dropQuery.setInt( 3, currentYear );</span>
<span class="fc" id="L211">            dropQuery.setInt( 4, currentSemester );</span>
<span class="fc" id="L212">            int dropQueryResult = dropQuery.executeUpdate();</span>
            // Returns true if the entry was deleted, false otherwise
<span class="fc bfc" id="L214" title="All 2 branches covered.">            return dropQueryResult == 1;</span>
<span class="fc" id="L215">        } catch ( Exception error ) {</span>
<span class="fc" id="L216">            System.out.println( &quot;Database Error. Try again later&quot; );</span>
<span class="fc" id="L217">            return false;</span>
        }
    }

    @Override
    public String[][] getAllRecords( String entryNumber ) {
        try {
<span class="fc bfc" id="L224" title="All 2 branches covered.">            if ( entryNumber == null ) return new String[][]{};</span>
<span class="fc" id="L225">            entryNumber = entryNumber.toUpperCase();</span>

            // SQL query to fetch the credits and grade of the given entry number from the database
<span class="fc" id="L228">            PreparedStatement recordsQuery = databaseConnection.prepareStatement( &quot;SELECT credits, grade FROM student_course_registration NATURAL JOIN course_catalog WHERE entry_number = ?&quot; );</span>
<span class="fc" id="L229">            recordsQuery.setString( 1, entryNumber );</span>
<span class="fc" id="L230">            ResultSet recordsQueryResult = recordsQuery.executeQuery();</span>

            // Converting data from the result set into the required format
<span class="fc" id="L233">            ArrayList&lt;String[]&gt; records = new ArrayList&lt;&gt;();</span>
<span class="fc bfc" id="L234" title="All 2 branches covered.">            while ( recordsQueryResult.next() ) {</span>
<span class="fc" id="L235">                String credits = recordsQueryResult.getString( 1 );</span>
<span class="fc" id="L236">                String grade   = recordsQueryResult.getString( 2 );</span>
<span class="fc" id="L237">                records.add( new String[]{ credits, grade } );</span>
<span class="fc" id="L238">            }</span>
<span class="fc" id="L239">            return records.toArray( new String[records.size()][] );</span>
<span class="fc" id="L240">        } catch ( Exception error ) {</span>
<span class="fc" id="L241">            System.out.println( &quot;Database Error. Try again later&quot; );</span>
<span class="fc" id="L242">            return new String[][]{};</span>
        }
    }

    @Override
    public String[][] getOfferedCourses( int currentYear, int currentSemester ) {
        try {
<span class="fc bfc" id="L249" title="All 4 branches covered.">            if ( currentYear &lt;= 0 || currentSemester &lt;= 0 ) return new String[][]{};</span>

<span class="fc" id="L251">            PreparedStatement getCoursesQuery = databaseConnection.prepareStatement( &quot;SELECT course_code, course_title, name, pre_requisites, department_id FROM course_offerings NATURAL JOIN course_catalog NATURAL JOIN faculty WHERE year = ? AND semester = ? ORDER BY course_code&quot; );</span>
<span class="fc" id="L252">            getCoursesQuery.setInt( 1, currentYear );</span>
<span class="fc" id="L253">            getCoursesQuery.setInt( 2, currentSemester );</span>
<span class="fc" id="L254">            ResultSet getCoursesQueryResult = getCoursesQuery.executeQuery();</span>

<span class="fc" id="L256">            ArrayList&lt;String[]&gt; records = new ArrayList&lt;&gt;();</span>
<span class="fc bfc" id="L257" title="All 2 branches covered.">            while ( getCoursesQueryResult.next() ) {</span>
<span class="fc" id="L258">                String course_code    = getCoursesQueryResult.getString( 1 );</span>
<span class="fc" id="L259">                String course_title   = getCoursesQueryResult.getString( 2 );</span>
<span class="fc" id="L260">                String faculty_name   = getCoursesQueryResult.getString( 3 );</span>
<span class="fc" id="L261">                String pre_requisites = getCoursesQueryResult.getString( 4 );</span>
<span class="fc" id="L262">                String departmentID   = getCoursesQueryResult.getString( 5 );</span>
<span class="fc" id="L263">                records.add( new String[]{ course_code, course_title, faculty_name, pre_requisites, departmentID, &quot;&quot; } );</span>
<span class="fc" id="L264">            }</span>
<span class="fc" id="L265">            return records.toArray( new String[records.size()][] );</span>
<span class="fc" id="L266">        } catch ( Exception error ) {</span>
<span class="fc" id="L267">            System.out.println( &quot;Database Error. Try again later&quot; );</span>
<span class="fc" id="L268">            return new String[][]{};</span>
        }
    }

    @Override
    public boolean isCurrentEventEnrolling( int currentYear, int currentSemester ) {
        try {
<span class="fc bfc" id="L275" title="All 4 branches covered.">            if ( currentYear &lt;= 0 || currentSemester &lt;= 0 ) return false;</span>

            // SQL query to check if the current event in the given session is enrolling
<span class="fc" id="L278">            PreparedStatement offeringCheckQuery = databaseConnection.prepareStatement( &quot;SELECT * FROM current_year_and_semester WHERE year = ? AND semester = ? AND current_event = 'ENROLLING'&quot; );</span>
<span class="fc" id="L279">            offeringCheckQuery.setInt( 1, currentYear );</span>
<span class="fc" id="L280">            offeringCheckQuery.setInt( 2, currentSemester );</span>
<span class="fc" id="L281">            ResultSet offeringCheckQueryResult = offeringCheckQuery.executeQuery();</span>

            // If there exists such a record, it implies that the current session is offering
<span class="fc" id="L284">            return offeringCheckQueryResult.next();</span>
<span class="fc" id="L285">        } catch ( Exception error ) {</span>
<span class="fc" id="L286">            System.out.println( &quot;Database Error. Please try again later&quot; );</span>
<span class="fc" id="L287">            return false;</span>
        }
    }

    @Override
    public double getCGPACriteria( String courseCode, int currentYear, int currentSemester, String courseDepartment ) {
        try {
<span class="fc bfc" id="L294" title="All 8 branches covered.">            if ( courseCode == null || currentSemester &lt;= 0 || currentYear &lt;= 0 || courseDepartment == null ) return 11;</span>

            // SQL query to fetch the CGPA criteria from the database
<span class="fc" id="L297">            PreparedStatement getCriteriaQuery = databaseConnection.prepareStatement( &quot;SELECT cgpa_criteria FROM course_offerings WHERE course_code = ? AND year = ? AND semester = ? AND department_id = ?&quot; );</span>
<span class="fc" id="L298">            getCriteriaQuery.setString( 1, courseCode );</span>
<span class="fc" id="L299">            getCriteriaQuery.setInt( 2, currentYear );</span>
<span class="fc" id="L300">            getCriteriaQuery.setInt( 3, currentSemester );</span>
<span class="fc" id="L301">            getCriteriaQuery.setString( 4, courseDepartment );</span>
<span class="fc" id="L302">            ResultSet getCriteriaQueryResult = getCriteriaQuery.executeQuery();</span>
<span class="fc" id="L303">            boolean courseExist = getCriteriaQueryResult.next();</span>

            // If the course is not found in the database, it returns 11 to denote that you cannot enroll in the course
<span class="fc bfc" id="L306" title="All 2 branches covered.">            if ( !courseExist ) return 11;</span>
            // Returns the CGPA criteria if found from the database
<span class="fc" id="L308">            return getCriteriaQueryResult.getDouble( 1 );</span>
<span class="fc" id="L309">        } catch ( Exception error ) {</span>
<span class="fc" id="L310">            System.out.println( &quot;Database Error. Please try again later&quot; );</span>
<span class="fc" id="L311">            return 11;</span>
        }
    }

    @Override
    public String getCourseCategory( String courseCode, int year, int semester, String courseDepartment, String studentDepartment, int batch ) {
        try {
<span class="fc bfc" id="L318" title="All 12 branches covered.">            if ( courseCode == null || year &lt; 0 || semester &lt; 0 || courseDepartment == null || studentDepartment == null || batch &lt; 0 )</span>
<span class="fc" id="L319">                return &quot;&quot;;</span>

            // SQL query to fetch the course category for this particular student from the database
<span class="fc" id="L322">            PreparedStatement getCategoryQuery = databaseConnection.prepareStatement( &quot;SELECT category FROM course_category WHERE course_code = ? AND year = ? AND semester = ? AND department_id = ? AND batch = ? AND department = ?&quot; );</span>
<span class="fc" id="L323">            getCategoryQuery.setString( 1, courseCode );</span>
<span class="fc" id="L324">            getCategoryQuery.setInt( 2, year );</span>
<span class="fc" id="L325">            getCategoryQuery.setInt( 3, semester );</span>
<span class="fc" id="L326">            getCategoryQuery.setString( 4, courseDepartment );</span>
<span class="fc" id="L327">            getCategoryQuery.setInt( 5, batch );</span>
<span class="fc" id="L328">            getCategoryQuery.setString( 6, studentDepartment );</span>
<span class="fc" id="L329">            ResultSet getCategoryQueryResult = getCategoryQuery.executeQuery();</span>

            // If there is no such entry, student is not eligible
<span class="fc bfc" id="L332" title="All 2 branches covered.">            if ( !getCategoryQueryResult.next() ) return &quot;&quot;;</span>
<span class="fc" id="L333">            return getCategoryQueryResult.getString( 1 );</span>
<span class="fc" id="L334">        } catch ( Exception error ) {</span>
<span class="fc" id="L335">            System.out.println( &quot;Database Error. Please try again later&quot; );</span>
<span class="fc" id="L336">            return &quot;&quot;;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>